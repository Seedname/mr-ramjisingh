function radians(degrees) {
    return Math.PI * degrees / 180;
}

function degrees(radians) {
    return 180 * radians / Math.PI;
}

//Lower quality if laggy or program isn't working
var quality = 400;

//Zoom in/out
var zoom = 2;

//Speed 
//Recommended (1: fastest, 5: slowest)
var speed = 1;

//Maximum number of points to draw on the trail
var maxPoints = 400;

//Items Choices: "fourier", "pi", "word", "equation", "custom"
var item = "test";

//Paste save data here
var data = [];

var angles = [];
var frequencies = [];
var amplitudes = [];
var origin;
var N = 0;


function arrow(x, y, angle, length) {
    var l = Math.abs(length);
    push();
        translate(x, y);
        rotate(-angle);
        line(0, 0, length, 0);
        rotate(Math.PI/2);
        translate(0, -length);
        var s = sqrt(l)/2 * (length/l);
        fill(255);
        noStroke();
        triangle(-s, 2*s, 0, 0, s, 2*s); 
    pop();
}

function partition(arr, arr2, arr3, low, high) {
    var temp;
    var temp2;
    var temp3;
    var pivot = arr[high];

    var i = (low - 1);
    for (var j = low; j <= high - 1; j++) {
        if (arr[j] >= pivot) {
            i++;

            temp = arr[i];
            arr[i] = arr[j];
            arr[j] = temp;
            
            temp2 = arr2[i];
            arr2[i] = arr2[j];
            arr2[j] = temp2;
            
            temp3 = arr3[i];
            arr3[i] = arr3[j];
            arr3[j] = temp3;
        }
    }

    temp = arr[i + 1];
    arr[i + 1] = arr[high];
    arr[high] = temp;
    
    temp2 = arr2[i + 1];
    arr2[i + 1] = arr2[high];
    arr2[high] = temp2;   
    
    temp3 = arr3[i + 1];
    arr3[i + 1] = arr3[high];
    arr3[high] = temp3;

    return i + 1;
}
function quickSort(arr, arr2, arr3, l, h) {
    var stack = new Array(h - l + 1);
    stack.fill(0);

    var top = -1;

    stack[++top] = l;
    stack[++top] = h;

    while (top >= 0) {
        h = stack[top--];
        l = stack[top--];

        var p = partition(arr, arr2, arr3, l, h);

        if (p - 1 > l) {
            stack[++top] = l;
            stack[++top] = p - 1;
        }

        if (p + 1 < h) {
            stack[++top] = p + 1;
            stack[++top] = h;
        }
    }
}

function Complex(a, b) {
    this.a = a;
    this.b = b;
    
    this.add = function(that) {
        this.a += that.a;
        this.b += that.b;
    };
    
    this.getAmplitude = function(N) {
        return sqrt(this.a*this.a + this.b*this.b)/N;
    };
    
    this.getAngle = function() {
        return atan2(this.b, this.a);
    };
    
}
Complex.multiply = function(comp1, comp2) {
    return new Complex(comp1.a*comp2.a - comp1.b*comp2.b, comp1.a * comp2.b + comp1.b * comp2.a);
};

function Camera2(x, y, zoom) {
    this.pos = new p5.Vector(x, y);
    this.vel = new p5.Vector(0, 0);
    this.zoom = zoom;
    
    this.timeFrame = 60;
    
    this.reset = function(x, y) {
        var center = new p5.Vector(x, y);
        this.vel.set(p5.Vector.div(p5.Vector.sub(center, this.pos), 11));
    };
    
    this.moveTo = function(x, y) {
        var pos = new p5.Vector(x, y);
        var difference = p5.Vector.sub(pos, this.pos);
        this.vel = p5.Vector.mult(difference, 0.2);
        this.pos.add(this.vel);
    };
    
    this.zoomTo = function(zoom) {
        this.zoom = zoom;
    };
    
    this.apply = function() {
        var x = width/2-this.pos.x;
        var y = height/2-this.pos.y;
        
        translate(x, -y);
    };
}

var points = [];

var dt = 1;
var time = 0;

var c;


// Data {
if(item === "fourier") { 
data = [[978.1409912109375,416.06298828125],[1006.0936279296875,417.55877685546875],[1035.3548583984375,416.6731872558594],[1064.597412109375,416.6228332519531],[1062.46240234375,409.72930908203125],[1034.05224609375,409.8478088378906],[1006.3048706054688,417.68341064453125],[1031.38134765625,429.5126953125],[1059.6793212890625,424.2395935058594],[1081.4482421875,419.4850769042969],[1090.481201171875,408.03875732421875],[1084.60546875,380.43695068359375],[1066.8173828125,358.4527893066406],[1057.9342041015625,330.559326171875],[1077.275634765625,333.4190673828125],[1104.3861083984375,324.2636413574219],[1088.651123046875,317.6773681640625],[1059.8553466796875,314.405517578125],[1052.7950439453125,289.5367736816406],[1071.4632568359375,268.6010437011719],[1099.0382080078125,269.0710144042969],[1117.889892578125,291.4454650878906],[1098.3861083984375,298.4510498046875],[1071.9462890625,291.00579833984375],[1056.910888671875,307.7196960449219],[1078.758056640625,304.12994384765625],[1098.3853759765625,307.59503173828125],[1124.032470703125,321.3531494140625],[1128.509765625,349.3360595703125],[1154.9285888671875,346.5909729003906],[1161.0072021484375,320.0749816894531],[1156.2786865234375,292.2506408691406],[1177.7275390625,273.36590576171875],[1154.905029296875,279.2236633300781],[1169.7591552734375,255.7207794189453],[1170.3056640625,227.41769409179688],[1161.719482421875,210.35142517089844],[1164.3162841796875,181.8340301513672],[1151.836181640625,155.60427856445312],[1128.029541015625,145.25543212890625],[1127.4757080078125,122.16261291503906],[1110.031982421875,99.71746063232422],[1087.4088134765625,90.52191925048828],[1070.3424072265625,68.71440124511719],[1042.5819091796875,73.55103302001953],[1032.5535888671875,60.260807037353516],[1020.5125122070312,45.96230697631836],[1007.6114501953125,71.0347671508789],[980.7973022460938,65.9453353881836],[954.971923828125,52.68523025512695],[927.406494140625,59.33533477783203],[902.47509765625,62.23235321044922],[879.4530639648438,78.98575592041016],[857.2247924804688,91.27543640136719],[834.9812622070312,109.49578094482422],[827.0424194335938,136.3395538330078],[806.9312744140625,157.24839782714844],[799.774658203125,185.3073272705078],[796.0242919921875,212.32679748535156],[785.7222900390625,238.88882446289062],[799.3591918945312,264.3584289550781],[784.958984375,285.05523681640625],[795.0131225585938,312.0045471191406],[803.1355590820312,335.8437805175781],[812.4652099609375,363.3078918457031],[837.4776611328125,377.4693603515625],[836.9453125,401.2357482910156],[817.1953125,420.50946044921875],[813.29296875,449.4762878417969],[806.375732421875,477.9251403808594],[798.77294921875,506.20074462890625],[780.0408935546875,525.6082763671875],[766.9361572265625,550.9524536132812],[743.007568359375,566.8248291015625],[720.1069946289062,585.0453491210938],[698.7771606445312,605.0946655273438],[678.1891479492188,625.8251342773438],[655.4420166015625,644.2598876953125],[634.58349609375,664.7304077148438],[619.0560302734375,689.5358276367188],[605.4990844726562,715.4822387695312],[593.79638671875,742.3143310546875],[584.6314697265625,770.1067504882812],[579.7155151367188,798.9220581054688],[578.961181640625,828.1920166015625],[578.1595458984375,857.4610595703125],[577.35009765625,886.72998046875],[576.6937255859375,916.0025024414062],[584.232177734375,940.9002685546875],[612.7728881835938,947.403076171875],[640.6353759765625,956.3223876953125],[668.060302734375,966.5782470703125],[695.6254272460938,976.4485473632812],[723.7572631835938,984.4944458007812],[751.752685546875,993.0048217773438],[779.2965087890625,1002.9368286132812],[807.3779296875,1007.1964721679688],[815.0838623046875,979.5498657226562],[814.3809814453125,950.3422241210938],[809.41015625,921.4874267578125],[806.4793090820312,892.3767700195312],[807.10888671875,863.134765625],[813.5072631835938,834.5780639648438],[815.2081909179688,805.8231811523438],[802.7110595703125,779.3648681640625],[818.52783203125,799.912109375],[822.7767333984375,828.7540893554688],[820.66259765625,857.93359375],[816.7207641601562,886.928466796875],[818.4810791015625,916.1532592773438],[819.8427734375,945.3998413085938],[819.6195678710938,974.6727905273438],[816.8928833007812,1003.8167724609375],[830.3579711914062,1024.739013671875],[858.8521118164062,1031.274169921875],[888.0136108398438,1033.7591552734375],[917.2754516601562,1034.7855224609375],[946.5313720703125,1035.96337890625],[975.74267578125,1037.9539794921875],[1004.99853515625,1039.0885009765625],[1034.2760009765625,1038.97802734375],[1063.50048828125,1037.27001953125],[1092.234130859375,1031.983154296875],[1096.8153076171875,1004.6915893554688],[1096.21435546875,975.4522705078125],[1094.6568603515625,946.2138671875],[1083.777587890625,926.0535278320312],[1064.227294921875,944.8880615234375],[1038.4141845703125,937.8905639648438],[1040.182373046875,910.2509155273438],[1066.78857421875,904.998779296875],[1090.27197265625,914.0447387695312],[1085.031982421875,885.2390747070312],[1075.945068359375,857.4508056640625],[1065.5848388671875,830.0684814453125],[1058.573486328125,801.6451416015625],[1036.769287109375,799.4832763671875],[1015.3564453125,814.9334106445312],[997.7546997070312,795.8519287109375],[1014.690673828125,775.349853515625],[1038.794921875,785.2322998046875],[1040.9678955078125,761.5900268554688],[1028.93701171875,734.8970947265625],[1016.5877075195312,708.35205078125],[1003.8694458007812,681.9869995117188],[983.1135864257812,672.9038696289062],[974.4684448242188,699.6152954101562],[947.672119140625,698.5912475585938],[946.7564697265625,670.7971801757812],[974.277099609375,665.3219604492188],[983.7636108398438,641.719482421875],[963.6372680664062,622.8799438476562],[950.5595703125,597.042236328125],[941.7439575195312,569.1472778320312],[930.9213256835938,541.9441528320312],[919.0072021484375,515.2847290039062],[909.1593627929688,489.7086181640625],[883.9474487304688,474.8277587890625],[858.1277465820312,461.0650939941406],[838.2590942382812,439.9501647949219],[834.4473876953125,412.52252197265625],[855.6699829101562,429.1176452636719],[875.4662475585938,450.455322265625],[898.5818481445312,468.4245910644531],[919.9599609375,488.0216064453125],[932.462646484375,514.1435546875],[951.6187133789062,536.2870483398438],[967.3409423828125,560.6097412109375],[976.4382934570312,588.439208984375],[990.911865234375,613.5523681640625],[1017.802490234375,620.1452026367188],[1046.7681884765625,615.9324951171875],[1075.6907958984375,611.454833984375],[1087.97265625,588.8868408203125],[1085.2149658203125,559.738525390625],[1087.8597412109375,530.77392578125],[1099.184814453125,503.8052978515625],[1120.5023193359375,493.33636474609375],[1135.7366943359375,517.2052001953125],[1139.1484375,546.2267456054688],[1147.1099853515625,574.3985595703125],[1155.46240234375,602.460205078125],[1158.8656005859375,631.4879760742188],[1177.191650390625,652.9024047851562],[1198.4344482421875,670.9100341796875],[1200.2442626953125,700.1343994140625],[1202.190185546875,729.3499145507812],[1204.91748046875,758.5020751953125],[1206.7215576171875,787.7210083007812],[1200.175537109375,815.540283203125],[1183.6351318359375,839.6593627929688],[1172.6669921875,866.78564453125],[1159.93896484375,893.1510009765625],[1140.044677734375,913.5278930664062],[1146.0262451171875,938.8781127929688],[1147.10546875,968.1131591796875],[1147.968505859375,997.3792724609375],[1150.1953125,1026.569580078125],[1178.8243408203125,1023.023193359375],[1207.6192626953125,1017.737060546875],[1235.728271484375,1009.6691284179688],[1259.8441162109375,993.2653198242188],[1281.430908203125,973.4915771484375],[1302.000732421875,952.65673828125],[1325.40185546875,935.1854858398438],[1343.8720703125,913.336669921875],[1341.6888427734375,884.142578125],[1339.882080078125,854.9182739257812],[1338.1666259765625,825.6888427734375],[1335.370849609375,796.592041015625],[1327.091064453125,768.5164794921875],[1316.2259521484375,741.3508911132812],[1298.730712890625,718.2238159179688],[1284.082763671875,692.874267578125],[1270.11669921875,667.140380859375],[1256.2491455078125,641.3521728515625],[1237.464111328125,620.0433959960938],[1211.0672607421875,607.382080078125],[1187.8018798828125,591.8577880859375],[1179.1610107421875,563.8932495117188],[1171.896484375,535.530029296875],[1165.331787109375,506.9964294433594],[1143.4805908203125,488.92742919921875],[1120.04541015625,471.38958740234375],[1118.7784423828125,443.7449951171875],[1122.7266845703125,414.7323913574219],[1126.5692138671875,385.70623779296875],[1126.4510498046875,377.1919860839844],[1120.7647705078125,405.90814208984375],[1112.7862548828125,434.069091796875],[1101.6805419921875,461.1349792480469],[1085.5885009765625,485.4938049316406],[1061.4423828125,501.3101501464844],[1032.567138671875,505.2024230957031],[1003.91455078125,499.7131652832031],[977.5498046875,487.111572265625],[952.6947021484375,471.63641357421875],[927.1875610351562,457.26470947265625],[901.2635498046875,443.6546325683594],[879.6588745117188,424.66522216796875],[867.8626098632812,402.3345031738281],[850.0510864257812,380.35540771484375],[833.3297119140625,356.45721435546875],[830.0328369140625,327.7999572753906],[854.0225830078125,329.8160400390625],[870.6068115234375,353.4653015136719],[880.364013671875,343.0336608886719],[890.2074584960938,318.08563232421875],[918.7523193359375,311.6510314941406],[942.4332885742188,296.89361572265625],[968.7470703125,284.8628845214844],[995.78173828125,293.5752258300781],[990.087158203125,316.5346984863281],[961.756103515625,322.482666015625],[941.4284057617188,316.11749267578125],[962.6531982421875,313.2940673828125],[983.5467529296875,305.02484130859375],[1006.0883178710938,301.788330078125],[1005.224609375,272.83251953125],[983.4697875976562,263.77178955078125],[954.401611328125,266.3971862792969],[927.1603393554688,276.9287109375],[903.9033203125,294.6737976074219],[892.2606811523438,293.7213134765625],[889.5825805664062,266.7023620605469],[873.7216796875,243.45849609375],[888.1776733398438,236.48081970214844],[916.7686767578125,241.3275604248047],[899.0044555664062,228.11570739746094],[893.60400390625,207.82418823242188],[917.4738159179688,224.61521911621094],[914.2783813476562,211.52493286132812],[918.4398803710938,188.18771362304688],[932.43115234375,181.98277282714844],[949.5631103515625,203.33642578125],[978.08447265625,198.2394561767578],[1003.45068359375,183.8550262451172],[1028.86572265625,179.44268798828125],[1051.363037109375,197.80043029785156],[1060.9759521484375,225.0697021484375],[1066.7196044921875,215.90194702148438],[1078.85400390625,225.1652374267578],[1097.7017822265625,245.5894775390625],[1119.451171875,255.42770385742188],[1122.3868408203125,284.5594482421875],[1109.5185546875,269.4069519042969],[1083.1942138671875,258.979248046875],[1055.9061279296875,266.169921875],[1045.018798828125,292.7767639160156],[1052.155517578125,321.03314208984375],[1061.2083740234375,348.83319091796875],[1069.8143310546875,376.6739807128906],[1060.1851806640625,382.52032470703125],[1041.9693603515625,390.8840637207031],[1026.5379638671875,377.14117431640625],[1008.450927734375,374.7825012207031],[1006.17822265625,366.0081787109375],[984.4978637695312,385.5006408691406],[971.5401611328125,411.63385009765625],[978.1409912109375,416.06298828125]];
} else if(item === "pi") {
data = [[161,372],[162,369],[166,365],[168,361],[172,355],[176,346],[179,340],[182,333],[185,326],[188,321],[193,314],[196,309],[200,301],[204,296],[208,293],[213,288],[220,283],[225,280],[232,276],[236,273],[243,270],[251,268],[255,266],[260,265],[265,263],[270,262],[280,261],[288,259],[296,258],[304,257],[310,256],[315,256],[320,255],[324,255],[329,255],[334,255],[340,254],[346,254],[352,253],[357,253],[361,252],[364,251],[368,250],[372,250],[376,250],[380,249],[384,249],[388,249],[392,248],[395,248],[399,248],[403,248],[407,249],[410,249],[413,249],[416,252],[419,254],[420,256],[423,259],[426,263],[428,267],[430,270],[432,273],[432,276],[432,280],[432,283],[432,288],[430,290],[428,292],[426,295],[424,297],[421,300],[419,302],[416,303],[413,304],[410,305],[408,305],[404,306],[400,306],[396,306],[392,306],[388,306],[382,306],[378,306],[375,306],[371,307],[366,309],[363,309],[360,311],[359,313],[356,316],[354,318],[352,321],[351,325],[349,328],[349,331],[349,335],[350,338],[352,341],[353,345],[354,347],[356,350],[356,353],[358,357],[359,361],[360,365],[361,368],[363,371],[364,374],[366,377],[368,380],[370,381],[372,385],[373,389],[375,390],[376,393],[377,395],[379,398],[381,401],[382,404],[384,406],[388,408],[392,406],[395,404],[397,401],[400,398],[403,397],[404,394],[406,390],[408,387],[411,384],[413,381],[415,378],[417,376],[418,372],[419,369],[420,366],[422,363],[423,361],[424,361],[424,366],[424,369],[424,374],[424,377],[424,382],[424,386],[423,389],[422,393],[422,397],[420,401],[420,407],[418,411],[416,415],[414,420],[412,424],[411,429],[408,433],[407,436],[404,438],[402,441],[399,442],[395,445],[392,445],[388,446],[384,448],[380,449],[376,449],[372,449],[368,449],[366,447],[364,445],[361,443],[359,440],[357,437],[355,435],[352,431],[351,428],[348,424],[346,421],[344,417],[341,412],[338,407],[336,404],[335,399],[333,395],[331,389],[329,385],[328,380],[327,374],[327,371],[326,367],[325,363],[325,360],[324,356],[324,353],[320,353],[316,353],[313,353],[309,353],[305,353],[302,353],[296,352],[288,351],[282,350],[280,353],[280,357],[280,361],[280,368],[280,373],[280,377],[280,381],[280,385],[281,390],[282,394],[283,397],[283,401],[283,405],[284,410],[284,416],[284,420],[284,425],[284,429],[284,433],[284,437],[284,440],[282,444],[280,446],[280,449],[278,453],[276,454],[275,457],[273,459],[272,462],[269,465],[267,467],[265,469],[262,469],[258,468],[256,466],[254,464],[252,461],[249,457],[248,454],[246,452],[245,449],[244,445],[244,441],[242,434],[241,429],[240,425],[240,420],[240,416],[240,410],[240,405],[240,402],[241,398],[242,395],[242,391],[242,386],[242,383],[242,378],[242,372],[242,367],[241,363],[240,361],[238,359],[234,359],[231,359],[227,359],[223,359],[220,360],[217,361],[213,362],[211,363],[208,364],[204,364],[200,365],[196,367],[192,368],[187,369],[183,372],[180,373],[175,376],[171,377],[167,380],[164,381],[163,383],[160,385],[158,387],[156,388],[152,389],[152,388],[155,385],[159,381],[161,380],[163,377],[164,374],[164,371],[164,367]];
} else if(item === "word") {
data = [[93.33333587646484,347.03704833984375],[93.33333587646484,347.03704833984375],[82.9629898071289,330.74078369140625],[77.77777862548828,321.8518981933594],[68.8888931274414,304.0740966796875],[61.48146057128906,286.29632568359375],[61.48146057128906,286.29632568359375],[56.296321868896484,268.5185546875],[54.814796447753906,259.6296691894531],[53.333335876464844,241.8518829345703],[55.55555725097656,222.5926055908203],[55.55555725097656,222.5926055908203],[60.000003814697266,204.8148193359375],[65.18521118164062,191.4814910888672],[67.40743255615234,187.0370635986328],[71.11111450195312,181.8518829345703],[73.33333587646484,180.37039184570312],[73.33333587646484,180.37039184570312],[74.8147964477539,179.62965393066406],[77.77777862548828,182.5926055908203],[83.70368194580078,198.88890075683594],[88.8888931274414,230.7407684326172],[88.8888931274414,230.7407684326172],[91.11111450195312,248.5185546875],[92.59257507324219,284.0740966796875],[93.33333587646484,321.8518981933594],[92.59257507324219,361.8518981933594],[92.59257507324219,361.8518981933594],[90.37035369873047,402.5926208496094],[88.14813232421875,422.5926208496094],[80.74076843261719,458.1481628417969],[72.59257507324219,485.5555725097656],[63.70368576049805,504.0740966796875],[63.70368576049805,504.0740966796875],[60.000003814697266,510.7407531738281],[51.85187530517578,520.3704223632812],[46.66666793823242,524.8148803710938],[43.70368194580078,526.2963256835938],[43.70368194580078,526.2963256835938],[42.222225189208984,525.5556030273438],[40,521.8518676757812],[38.5185432434082,508.5185546875],[40,486.29632568359375],[40,486.29632568359375],[42.222225189208984,472.9629821777344],[49.62965393066406,446.29632568359375],[58.5185432434082,419.629638671875],[68.8888931274414,395.1852111816406],[74.0740966796875,384.0740966796875],[74.0740966796875,384.0740966796875],[82.9629898071289,366.29632568359375],[89.62965393066406,352.9630126953125],[101.48146057128906,338.888916015625],[102.22222900390625,339.6296691894531],[102.22222900390625,339.6296691894531],[102.9629898071289,339.6296691894531],[104.44445037841797,342.5926208496094],[107.40743255615234,349.25927734375],[113.33333587646484,359.6296691894531],[113.33333587646484,359.6296691894531],[117.03701782226562,364.8148193359375],[124.44445037841797,372.9630126953125],[129.62965393066406,377.4074401855469],[131.8518829345703,378.1481628417969],[137.03701782226562,377.4074401855469],[137.03701782226562,377.4074401855469],[144.4444580078125,369.25927734375],[149.62965393066406,353.7037353515625],[152.5925750732422,337.4074401855469],[153.33334350585938,330.74078369140625],[153.33334350585938,330.74078369140625],[153.33334350585938,318.1481628417969],[154.0740966796875,310.74078369140625],[154.0740966796875,306.29632568359375],[154.0740966796875,305.5555725097656],[154.0740966796875,305.5555725097656],[154.0740966796875,304.8148193359375],[154.0740966796875,305.5555725097656],[154.81480407714844,307.7778015136719],[158.5185546875,320.3703918457031],[160.7407684326172,328.5185546875],[160.7407684326172,328.5185546875],[165.92591857910156,344.0741271972656],[169.62965393066406,355.1852111816406],[171.8518829345703,359.6296691894531],[175.55555725097656,366.29632568359375],[175.55555725097656,366.29632568359375],[178.5185546875,370.74078369140625],[181.48146057128906,372.9630126953125],[182.96299743652344,372.9630126953125],[184.4444580078125,372.9630126953125],[184.4444580078125,372.9630126953125],[186.6666717529297,371.48150634765625],[189.62965393066406,366.29632568359375],[190.370361328125,361.8518981933594],[191.8518829345703,352.9630126953125],[191.11111450195312,344.0741271972656],[191.11111450195312,344.0741271972656],[189.62965393066406,335.1852111816406],[188.88890075683594,330.74078369140625],[188.14813232421875,325.5555725097656],[186.6666717529297,321.8518981933594],[186.6666717529297,321.8518981933594],[186.6666717529297,320.3703918457031],[186.6666717529297,319.6296691894531],[188.88890075683594,324.0741271972656],[194.07411193847656,337.4074401855469],[194.07411193847656,337.4074401855469],[200.00001525878906,353.7037353515625],[205.18521118164062,364.8148193359375],[206.6666717529297,368.5185546875],[209.62966918945312,373.7037353515625],[211.8518829345703,375.9259338378906],[211.8518829345703,375.9259338378906],[214.07411193847656,376.66668701171875],[214.81480407714844,375.9259338378906],[217.7777862548828,373.7037353515625],[222.96299743652344,365.5555725097656],[222.96299743652344,365.5555725097656],[236.29632568359375,298.888916015625],[237.7777862548828,290],[238.5185546875,280.3703918457031],[239.25924682617188,267.03704833984375],[239.25924682617188,267.03704833984375],[239.25924682617188,258.888916015625],[238.5185546875,245.55557250976562],[237.7777862548828,235.1852264404297],[237.0370330810547,232.22222900390625],[236.29632568359375,227.7777862548828],[236.29632568359375,227.7777862548828],[235.55557250976562,226.29632568359375],[234.07411193847656,227.7777862548828],[233.33334350585938,231.4814910888672],[230.370361328125,247.7777862548828],[230.370361328125,247.7777862548828],[228.88890075683594,270],[228.88890075683594,289.25927734375],[229.62966918945312,299.6296691894531],[231.8518829345703,320.3703918457031],[231.8518829345703,320.3703918457031],[235.55557250976562,338.1481628417969],[237.7777862548828,345.5555725097656],[242.22222900390625,355.9259338378906],[246.6666717529297,361.1111145019531],[250.370361328125,363.3333435058594],[250.370361328125,363.3333435058594],[252.5925750732422,363.3333435058594],[257.0370178222656,361.8518981933594],[264.4444580078125,353.7037353515625],[272.59259033203125,336.66668701171875],[272.59259033203125,336.66668701171875],[280,316.66668701171875],[283.7037048339844,307.03704833984375],[289.6296691894531,287.7778015136719],[294.8148193359375,271.48150634765625],[294.8148193359375,271.48150634765625],[297.0370178222656,258.888916015625],[297.7778015136719,255.1852264404297],[298.5185546875,250.00001525878906],[298.5185546875,247.03704833984375],[297.7778015136719,246.29632568359375],[297.7778015136719,246.29632568359375],[292.59259033203125,254.4444580078125],[285.9259033203125,269.25927734375],[283.7037048339844,277.4074401855469],[279.2592468261719,294.4444580078125],[279.2592468261719,294.4444580078125],[276.29632568359375,311.48150634765625],[275.5555725097656,328.5185546875],[275.5555725097656,335.9259338378906],[277.7778015136719,348.5185546875],[277.7778015136719,348.5185546875],[281.4814758300781,358.1481628417969],[285.9259033203125,364.0741271972656],[291.1111145019531,367.7778015136719],[293.3333435058594,368.5185546875],[299.2592468261719,368.5185546875],[299.2592468261719,368.5185546875],[305.9259033203125,366.29632568359375],[311.1111145019531,362.5926208496094],[320.74078369140625,350.0000305175781],[329.6296691894531,335.1852111816406],[329.6296691894531,335.1852111816406],[332.59259033203125,327.03704833984375],[338.5185546875,312.22222900390625],[342.22222900390625,298.888916015625],[346.66668701171875,278.888916015625],[346.66668701171875,278.888916015625],[345.9259338378906,278.1481628417969],[342.9630126953125,281.8518981933594],[340.74078369140625,287.7778015136719],[338.5185546875,295.1852111816406],[335.5555725097656,303.3333435058594],[335.5555725097656,303.3333435058594],[332.59259033203125,318.1481628417969],[331.1111145019531,330.74078369140625],[330.370361328125,341.8518981933594],[331.1111145019531,348.5185546875],[331.1111145019531,348.5185546875],[331.8518981933594,350.74078369140625],[333.3333435058594,352.9630126953125],[337.0370178222656,352.22222900390625],[345.1852111816406,341.8518981933594],[345.1852111816406,341.8518981933594],[349.6296691894531,333.7037048339844],[355.5555725097656,315.9259338378906],[359.2592468261719,301.8518981933594],[360.74078369140625,290.74078369140625],[360.74078369140625,287.03704833984375],[360.74078369140625,287.03704833984375],[361.4814758300781,281.8518981933594],[361.4814758300781,279.6296691894531],[361.4814758300781,278.888916015625],[361.4814758300781,279.6296691894531],[361.4814758300781,279.6296691894531],[361.4814758300781,283.3333435058594],[362.22222900390625,298.888916015625],[364.4444580078125,315.1852111816406],[365.9259338378906,322.5926208496094],[365.9259338378906,322.5926208496094],[368.888916015625,333.7037048339844],[371.8518981933594,341.8518981933594],[374.8148193359375,347.03704833984375],[375.5555725097656,348.5185546875],[377.7778015136719,350.0000305175781],[377.7778015136719,350.0000305175781],[378.5185546875,350.0000305175781],[380.7407531738281,347.03704833984375],[381.48150634765625,341.8518981933594],[382.22222900390625,327.03704833984375],[382.22222900390625,327.03704833984375],[381.48150634765625,312.9630126953125],[380.0000305175781,301.1111145019531],[380.0000305175781,297.4074401855469],[380.0000305175781,291.48150634765625],[380.0000305175781,291.48150634765625],[380.0000305175781,287.7778015136719],[380.7407531738281,286.29632568359375],[380.7407531738281,285.5555725097656],[382.22222900390625,291.48150634765625],[384.4444580078125,297.4074401855469],[384.4444580078125,297.4074401855469],[386.66668701171875,305.5555725097656],[390.3703918457031,318.888916015625],[392.5926208496094,327.03704833984375],[394.0740966796875,331.48150634765625],[394.0740966796875,331.48150634765625],[394.8148193359375,332.9630126953125],[395.5555725097656,334.4444580078125],[397.03704833984375,332.9630126953125],[400.0000305175781,321.8518981933594],[400.0000305175781,321.8518981933594],[401.48150634765625,312.9630126953125],[402.9629821777344,294.4444580078125],[408.1481628417969,264.0740966796875],[408.888916015625,264.0740966796875],[409.629638671875,264.0740966796875],[409.629638671875,264.0740966796875],[410.3703918457031,265.5555725097656],[414.0740966796875,276.66668701171875],[418.5185241699219,295.9259338378906],[420.7407531738281,305.5555725097656],[420.7407531738281,305.5555725097656],[423.7037353515625,321.8518981933594],[426.66668701171875,336.66668701171875],[431.11114501953125,348.5185546875],[435.5555725097656,356.66668701171875],[435.5555725097656,356.66668701171875],[438.5185546875,359.6296691894531],[442.9629821777344,364.0741271972656],[446.6667785644531,365.5555725097656],[448.1481628417969,366.29632568359375],[448.8890075683594,366.29632568359375],[448.8890075683594,366.29632568359375],[448.1481628417969,367.03704833984375],[444.4445495605469,367.03704833984375],[427.4074401855469,369.25927734375],[414.8148193359375,370.74078369140625],[414.8148193359375,370.74078369140625],[388.1481628417969,373.7037353515625],[362.9630126953125,377.4074401855469],[337.0370178222656,379.629638671875],[323.7037048339844,380.3703918457031],[323.7037048339844,380.3703918457031],[296.29632568359375,381.85186767578125],[268.14813232421875,382.5926208496094],[238.5185546875,381.85186767578125],[222.96299743652344,381.85186767578125],[191.8518829345703,380.3703918457031],[191.8518829345703,380.3703918457031],[162.22222900390625,378.888916015625],[133.33334350585938,377.4074401855469],[120.00000762939453,376.66668701171875],[96.29632568359375,375.1852111816406],[96.29632568359375,375.1852111816406],[76.29632568359375,373.7037353515625],[60.000003814697266,371.48150634765625],[53.333335876464844,370.74078369140625],[45.925907135009766,369.25927734375]];
} else if(item === "equation") {
data = [[0,350],[3.141592653589793,347.5528258147577],[6.283185307179586,340.45084971874735],[9.42477796076938,329.38926261462365],[12.566370614359172,315.45084971874735],[15.707963267948966,300],[18.84955592153876,284.54915028125265],[21.991148575128552,270.61073738537635],[25.132741228718345,259.54915028125265],[28.274333882308138,252.44717418524232],[31.41592653589793,250],[34.55751918948772,252.44717418524232],[37.69911184307752,259.54915028125265],[40.840704496667314,270.61073738537635],[43.98229715025711,284.54915028125265],[47.12388980384691,300.00000000000006],[50.265482457436704,315.45084971874746],[53.4070751110265,329.3892626146237],[56.5486677646163,340.45084971874746],[59.690260418206094,347.55282581475774],[62.83185307179589,350],[65.97344572538569,347.5528258147576],[69.11503837897548,340.4508497187473],[72.25663103256528,329.3892626146235],[75.39822368615508,315.4508497187472],[78.53981633974487,299.9999999999998],[81.68140899333467,284.54915028125237],[84.82300164692447,270.6107373853761],[87.96459430051426,259.5491502812525],[91.10618695410406,252.4471741852422],[94.24777960769386,250],[97.38937226128365,252.44717418524243],[100.53096491487345,259.5491502812528],[103.67255756846325,270.6107373853767],[106.81415022205304,284.54915028125305],[109.95574287564284,300.0000000000004],[113.09733552923264,315.45084971874775],[116.23892818282243,329.389262614624],[119.38052083641223,340.4508497187477],[122.52211349000203,347.55282581475785],[125.66370614359182,350],[128.80529879718162,347.5528258147575],[131.9468914507714,340.45084971874707],[135.08848410436119,329.3892626146233],[138.23007675795097,315.45084971874707],[141.37166941154075,299.99999999999966],[144.51326206513053,284.5491502812524],[147.65485471872032,270.6107373853761],[150.7964473723101,259.54915028125254],[153.93804002589988,252.44717418524232],[157.07963267948966,250],[160.22122533307945,252.44717418524235],[163.36281798666923,259.5491502812526],[166.504410640259,270.61073738537624],[169.6460032938488,284.5491502812524],[172.78759594743858,299.9999999999997],[175.92918860102836,315.4508497187472],[179.07078125461814,329.3892626146234],[182.21237390820792,340.4508497187471],[185.3539665617977,347.5528258147575],[188.4955592153875,350],[191.63715186897727,347.55282581475785],[194.77874452256705,340.4508497187477],[197.92033717615683,329.3892626146242],[201.06192982974662,315.4508497187481],[204.2035224833364,300.0000000000007],[207.34511513692618,284.54915028125333],[210.48670779051596,270.61073738537704],[213.62830044410575,259.54915028125316],[216.76989309769553,252.44717418524263],[219.9114857512853,250],[223.0530784048751,252.447174185242],[226.19467105846488,259.54915028125197],[229.33626371205466,270.6107373853754],[232.47785636564444,284.5491502812514],[235.61944901923422,299.9999999999988],[238.761041672824,315.45084971874616],[241.9026343264138,329.38926261462257],[245.04422698000357,340.4508497187465],[248.18581963359335,347.55282581475717],[251.32741228718314,350],[254.46900494077292,347.55282581475814],[257.61059759436273,340.45084971874826],[260.7521902479525,329.3892626146249],[263.8937829015423,315.45084971874894],[267.0353755551321,300.00000000000176],[270.17696820872186,284.5491502812542],[273.31856086231164,270.6107373853778],[276.4601535159014,259.5491502812537],[279.6017461694912,252.44717418524291],[282.743338823081,250],[285.8849314766708,252.44717418524172],[289.02652413026055,259.54915028125146],[292.16811678385034,270.61073738537465],[295.3097094374401,284.54915028125055],[298.4513020910299,299.9999999999977],[301.5928947446197,315.4508497187453],[304.73448739820947,329.3892626146218],[307.87608005179925,340.450849718746],[311.01767270538903,347.55282581475694],[314.1592653589788,350],[317.3008580125686,347.5528258147584],[320.4424506661584,340.450849718749],[323.58404331974816,329.3892626146258],[326.72563597333794,315.4508497187498],[329.8672286269277,300.00000000000284],[333.0088212805175,284.5491502812552],[336.1504139341073,270.6107373853788],[339.2920065876971,259.54915028125436],[342.43359924128686,252.4471741852432],[345.57519189487664,250],[348.7167845484664,252.4471741852414],[351.8583772020562,259.5491502812507],[354.999969855646,270.6107373853738],[358.14156250923577,284.5491502812497],[361.28315516282555,299.99999999999665],[364.42474781641533,315.4508497187443],[367.5663404700051,329.3892626146208],[370.7079331235949,340.45084971874536],[373.8495257771847,347.55282581475666],[376.99111843077446,350],[380.13271108436425,347.55282581475876],[383.274303737954,340.4508497187496],[386.4158963915438,329.38926261462666],[389.5574890451336,315.4508497187508],[392.6990816987234,300.0000000000039],[395.84067435231316,284.54915028125623],[398.98226700590294,270.61073738537937],[402.1238596594927,259.549150281255],[405.2654523130825,252.4471741852435],[408.4070449666723,250],[411.54863762026207,252.44717418524107],[414.69023027385185,259.54915028125026],[417.83182292744164,270.6107373853729],[420.9734155810314,284.54915028124867],[424.1150082346212,299.99999999999557],[427.256600888211,315.45084971874326],[430.39819354180077,329.38926261462024],[433.53978619539055,340.45084971874473],[436.68137884898033,347.5528258147563],[439.8229715025701,350],[442.9645641561599,347.5528258147591],[446.1061568097497,340.45084971875],[449.24774946333946,329.3892626146275],[452.38934211692924,315.45084971875184],[455.530934770519,300.00000000000495],[458.6725274241088,284.54915028125725],[461.8141200776986,270.6107373853802],[464.9557127312884,259.5491502812556],[468.09730538487815,252.44717418524385],[471.23889803846794,250],[474.3804906920577,252.44717418524073],[477.5220833456475,259.54915028124964],[480.6636759992373,270.61073738537203],[483.80526865282707,284.54915028124765],[486.94686130641685,299.9999999999945],[490.08845396000663,315.45084971874223],[493.2300466135964,329.3892626146193],[496.3716392671862,340.45084971874405],[499.513231920776,347.552825814756],[502.65482457436576,350],[505.79641722795554,347.55282581475944],[508.9380098815453,340.45084971875065],[512.0796025351351,329.3892626146284],[515.2211951887249,315.45084971875286],[518.3627878423147,300.000000000006],[521.5043804959045,284.5491502812583],[524.6459731494942,270.61073738538107],[527.787565803084,259.54915028125623],[530.9291584566738,252.4471741852442],[534.0707511102636,250],[537.2123437638534,252.44717418524039],[540.3539364174432,259.549150281249],[543.4955290710329,270.6107373853712],[546.6371217246227,284.5491502812466],[549.7787143782125,299.9999999999934],[552.9203070318023,315.4508497187412],[556.0618996853921,329.3892626146185],[559.2034923389818,340.4508497187434],[562.3450849925716,347.55282581475564],[565.4866776461614,350],[568.6282702997512,347.5528258147598],[571.769862953341,340.45084971875133],[574.9114556069308,329.3892626146293],[578.0530482605205,315.4508497187539],[581.1946409141103,300.0000000000071],[584.3362335677001,284.5491502812593],[587.4778262212899,270.610737385382],[590.6194188748797,259.54915028125686],[593.7610115284695,252.44717418524453],[596.9026041820592,250],[600.044196835649,252.44717418524007],[603.1857894892388,259.5491502812484],[606.3273821428286,270.61073738537027],[609.4689747964184,284.5491502812456],[612.6105674500081,299.9999999999923],[615.7521601035979,315.4508497187402],[618.8937527571877,329.3892626146176],[622.0353454107775,340.4508497187428],[625.1769380643673,347.5528258147553],[628.3185307179571,350]];
} else if(item === "test") {
data = [[170,215],[170,213],[171,210],[176,204],[179,201],[182,201],[186,201],[191,201],[194,204],[198,207],[202,216],[204,223],[207,244],[208,254],[211,274],[212,288],[214,308],[215,317],[216,329],[218,344],[221,351],[222,362],[224,372],[225,386],[225,391],[225,397],[225,404],[225,414],[225,420],[225,424],[225,428],[227,423],[229,413],[229,404],[229,396],[229,376],[229,365],[229,355],[228,343],[226,326],[226,323],[226,320],[225,316],[224,310],[222,306],[222,308],[225,311],[228,311],[233,311],[243,310],[251,309],[264,305],[272,300],[280,300],[282,300],[283,299],[283,297],[285,283],[285,274],[285,268],[287,255],[288,247],[290,228],[291,212],[291,203],[291,200],[291,201],[290,212],[290,225],[293,256],[295,266],[296,272],[298,284],[300,293],[300,299],[301,305],[302,313],[302,319],[303,336],[303,346],[304,364],[305,375],[307,380],[309,390],[310,396],[312,399],[316,398],[320,397],[323,395],[328,391],[328,388],[336,375],[344,360],[349,345],[352,340],[356,332],[360,329],[363,328],[375,317],[382,310],[387,308],[395,305],[398,302],[408,300],[409,300],[414,300],[413,298],[410,296],[407,294],[402,296],[394,298],[392,299],[384,305],[380,308],[369,318],[364,326],[360,330],[356,343],[353,360],[349,386],[349,389],[351,393],[355,394],[361,394],[372,394],[381,394],[392,394],[403,393],[420,384],[434,370],[439,355],[440,345],[440,340],[437,332],[435,329],[431,325],[429,322],[424,317],[423,314],[421,312],[416,301],[412,296],[412,293],[416,295],[418,298],[420,299],[423,301],[424,303],[426,305],[431,308],[433,310],[436,315],[436,316],[440,324],[441,327],[442,335],[442,342],[442,349],[443,360],[443,369],[443,388],[443,394],[443,402],[443,404],[443,409],[443,414],[443,417],[452,412],[464,403],[475,386],[481,372],[484,363],[488,354],[491,341],[493,324],[496,316],[496,308],[495,303],[494,300],[494,304],[494,316],[494,338],[494,354],[495,380],[497,394],[499,422],[502,436],[503,446],[503,452],[504,459],[504,469],[504,475],[504,477],[504,483],[504,489],[504,496],[504,500],[504,506],[501,507],[496,506],[495,504],[492,500],[491,497],[488,491],[487,484],[487,478],[487,470],[487,467],[487,458],[488,451],[491,439],[491,428],[493,420],[493,417],[494,412],[494,409],[494,404],[495,401],[495,396],[496,388],[498,384],[499,373],[499,370],[499,364],[499,359],[499,356],[500,349],[500,342],[500,329],[500,325],[500,322],[500,319],[500,317],[501,314],[504,310],[510,306],[513,304],[520,298],[527,293],[530,293],[533,293],[536,294],[541,300],[545,307],[552,317],[553,324],[557,332],[559,348],[559,354],[559,363],[559,368],[558,372],[554,374],[547,376],[543,378],[537,378],[530,380],[526,381],[514,382],[511,382],[507,382],[505,381],[505,380],[504,379],[503,376],[502,374],[504,373],[512,372],[521,372],[533,371],[536,371],[542,371],[546,371],[550,371],[555,368],[559,368],[559,366],[560,364],[571,357],[577,348],[582,340],[584,334],[589,322],[591,312],[592,308],[592,301],[593,297],[593,291],[594,297],[596,311],[600,341],[602,366],[605,382],[606,390],[607,403],[609,417],[611,432],[614,455],[614,470],[612,478],[611,480],[605,485],[603,490],[600,495],[593,504],[592,505],[586,505],[584,503],[584,493],[584,484],[584,470],[584,456],[584,447],[587,436],[592,419],[598,392],[601,383],[605,372],[605,370],[605,368],[605,365],[607,359],[613,328],[616,319],[617,311],[618,310],[623,307],[630,300],[636,300],[654,299],[657,299],[666,307],[672,314],[676,329],[676,334],[676,340],[672,346],[668,348],[659,352],[647,355],[633,358],[627,362],[622,363],[617,363],[616,363],[611,363],[610,362],[615,358],[616,356],[620,353],[624,352],[629,352],[633,352],[639,352],[648,352],[656,352],[670,350],[678,347],[688,340],[698,332],[706,323],[709,313],[712,298],[713,290],[713,287],[712,285],[712,292],[714,325],[717,342],[721,354],[728,363],[734,364],[747,353],[756,340],[760,332],[760,328],[760,320],[760,316],[760,312],[761,304],[763,298],[764,292],[764,292],[765,300],[766,312],[766,322],[770,342],[774,361],[775,384],[775,396],[773,437],[768,446],[761,454],[751,459],[744,460],[736,460],[735,457],[736,443],[740,431],[746,421],[753,412],[764,399],[781,378],[790,364],[793,353],[793,351],[793,348],[786,353],[784,357],[786,358],[790,363],[792,364],[794,364],[796,362],[798,362],[801,360],[805,358],[808,352],[821,312],[834,276],[843,253],[846,237],[848,216],[848,201],[848,201],[848,233],[848,298],[848,321],[848,347],[848,356],[848,363],[848,368],[848,374],[848,376],[848,360],[847,334],[846,297],[846,287],[847,268],[847,246],[850,205],[856,188],[860,188],[882,188],[895,193],[900,212],[897,227],[888,250],[883,256],[876,260],[869,263],[864,266],[856,269],[853,270],[855,269],[864,268],[883,273],[893,280],[898,284],[907,295],[912,308],[914,345],[912,362],[901,371],[888,375],[868,380],[855,380],[845,380],[841,373],[850,363],[867,358],[875,358],[889,358],[907,358],[917,356],[934,337],[941,322],[946,300],[946,297],[946,292],[946,290],[945,290],[943,300],[942,317],[942,344],[943,356],[944,357],[953,356],[970,345],[975,332],[976,313],[977,297],[977,293],[977,294],[980,295],[1000,296],[1011,296],[1012,300],[1007,310],[1000,339],[999,361],[999,364],[1006,369],[1011,371],[1020,368],[1027,351],[1041,307],[1048,283],[1052,266],[1057,237],[1059,220],[1059,210],[1059,212],[1054,234],[1054,252],[1053,259],[1053,261],[1053,263],[1048,263],[1042,264],[1037,264],[1033,264],[1033,264],[1038,263],[1047,260],[1057,260],[1062,260],[1061,261],[1057,262],[1050,262],[1048,263],[1048,266],[1048,274],[1048,276],[1048,285],[1047,300],[1047,324],[1047,332],[1054,340],[1059,344],[1064,348],[1072,356],[1076,356],[1086,332],[1090,316],[1096,300],[1104,281],[1107,269],[1115,238],[1115,230],[1112,210],[1108,212],[1101,220],[1099,229],[1098,242],[1098,253],[1098,271],[1096,307],[1096,319],[1096,331],[1096,335],[1096,340],[1095,347],[1094,348],[1094,345],[1094,337],[1094,324],[1094,316],[1097,300],[1099,293],[1108,293],[1117,294],[1128,297],[1134,305],[1137,317],[1137,330],[1139,344],[1143,351],[1152,346],[1166,329],[1178,311],[1186,294],[1199,284],[1205,282],[1204,285],[1193,290],[1168,317],[1168,330],[1168,338],[1176,347],[1185,348],[1205,336],[1210,329],[1215,307],[1210,293],[1205,286],[1202,285],[1204,288],[1209,296],[1212,299],[1214,302],[1214,299],[1214,279],[1214,269],[1215,256],[1216,241],[1221,223],[1223,212],[1223,212],[1221,229],[1217,239],[1216,261],[1216,292],[1215,321],[1215,347],[1216,346],[1239,312],[1244,297],[1254,286],[1257,284],[1267,282],[1272,278],[1268,277],[1250,286],[1242,304],[1236,321],[1236,344],[1253,350],[1264,339],[1274,327],[1279,284],[1279,276],[1279,271],[1278,272],[1278,275],[1278,285],[1278,311],[1278,333],[1279,340],[1293,332],[1303,310],[1306,285],[1308,276],[1314,261],[1314,265],[1314,267],[1313,269],[1311,274],[1308,290],[1308,304],[1318,324],[1324,330],[1340,335],[1347,326],[1352,298],[1352,287],[1352,285],[1352,283],[1352,277],[1352,288],[1352,316],[1352,331],[1352,359],[1350,381],[1338,400],[1324,401],[1313,399],[1313,393],[1332,372],[1336,365],[1342,360],[1352,347],[1356,337],[1359,332],[1360,328],[1371,303],[1376,289],[1388,247],[1389,233],[1389,212],[1391,215],[1391,225],[1388,248],[1387,266],[1386,282],[1386,310],[1386,316],[1386,316],[1386,314],[1382,317],[1380,322],[1380,332],[1384,332],[1387,330],[1388,325],[1386,324],[1381,324],[1380,326],[1381,326],[1381,324],[1381,333],[1381,350],[1380,361],[1373,372],[1371,377],[1365,389],[1359,396],[1338,405],[1322,412],[1298,421],[1267,431],[1234,444],[1224,449],[1167,464],[1125,469],[1093,475],[1048,484],[1019,487],[976,492],[951,494],[931,497],[924,499],[912,504],[872,515],[846,517],[816,521],[800,521],[772,516],[747,515],[724,516],[688,516],[661,521],[622,523],[608,524],[584,526],[565,530],[552,532],[529,532],[508,532],[489,532],[479,532],[456,532],[440,532],[440,536],[395,539],[385,536],[360,533],[347,531],[333,526],[323,522],[309,518],[298,514],[293,511],[281,506],[275,503],[272,499],[270,497],[265,492],[263,489],[259,486],[257,485],[256,484],[247,477],[231,463],[225,454],[225,452],[224,445],[224,442],[224,438],[224,436],[224,434],[224,430],[223,428],[216,420],[214,413],[207,405],[199,392],[192,379],[189,360],[185,352],[177,332],[173,305],[171,295],[169,284],[169,278],[169,267],[169,260],[169,250],[169,246],[169,241],[168,236],[168,234],[168,231],[168,226],[168,223],[169,222],[170,220],[170,218],[169,214],[169,213]]
}
//}

function init() {
    if(item === "custom") {
        quality = data.length;
    }
    var newData = new Array(quality);
    if(quality < data.length) {
        for(var i = 0; i < quality; i++) {
            newData[i] = data[floor(i * data.length / (quality))];
        }
    } else {
        newData = data;
    }
    
    N = newData.length;
    
    var xn = new Array(N);
    
    // Fourier Transform { 
    for(var i = 0; i < N; i++) {
        xn[i] = new Complex(newData[i][0] - origin.x, newData[i][1] - origin.y);
    }
    
    angles = new Array(N);
    amplitudes = new Array(N);
    frequencies = new Array(N);
    
    for(var k = 0; k < N; k++) {
        var total = new Complex(0, 0);
        
        for(var n = 0; n < N; n++) {
            var num = 2*PI*k*n/N;
            var s = new Complex(cos(num), -sin(num)); 
            
            total.add(Complex.multiply(xn[n], s));
        }
        
        angles[k] = total.getAngle();
        amplitudes[k] = total.getAmplitude(N) * zoom;
        frequencies[k] = 2 * PI * k/N;
    }
    
    //}
    quickSort(amplitudes, frequencies, angles, 0, N-1);
    
    // var str1 = "";
    // var str2 = "";
    // for (var k = 0; k < N; k++) {
    //     str1 += amplitudes[k] + "cos("+ frequencies[k] + "t+" + angles[k] + ") + ";
    //     str2 += amplitudes[k] + "sin("+ frequencies[k] + "t+" + angles[k] + ") + ";
    // }
    
    // println("(" + str1.substring(0, str1.length-3) + ", " + str2.substring(0, str2.length-3) + ")");
    // if(item === "fourier") {
    //     amplitudes[0] = 0;
    // }

}

var pointsInit;
var player, camera, levels, scenes, level, balls;


function setup() {
    createCanvas(document.body.clientWidth, window.innerHeight);
    origin = new p5.Vector(width/2, height/2);
    c = new Camera2(origin.x, origin.y, 1);

    if(item === "custom" && data.length === 0) {
        pointsInit = [];
        background(0);
        stroke(255, 255, 255);
        strokeWeight(2);
        textAlign(CENTER, CENTER);
        textSize(30);
        text("Draw a continuous curve\nClick R to run fourier transform\nClick S to save drawing", width/2, height/2);
    } else {
        init();
    }

    // player = 
    balls = [];
    // for (let i = 0; i < 100; i++) {
    //     balls.push(new Player(random(width), 0, 20, []));
    // }
    camera = new Camera(100, 0);
    let l = new Level();
    console.log(points);
    // for(var i = 0; i < data.length - 1; i++) {
    //     l.line(data[i][0], data[i][1], data[i+1][0], data[i+1][1]);
    // }
    
    levels = [l];
    scenes = [level0];
    level = 0;
    console.log(levels[level]);
    // let level = new Level();
}

function draw() {
    if(item !== "custom" ||  data.length > 0) {
    background(0);

    if(points.length > maxPoints) {
        points.shift();
    } 
    
    push();
    
    if(zoom > 1) {
        if(points.length > 2) {
            c.moveTo(points[points.length - 1][0], points[points.length - 1][1]);
            c.apply();
        }
    }
    // for (let i = 0; i < particles.length; i++) {
    //     // particles[i].x -= c.vel.x;
    //     particles[i].y += c.vel.y;    
    // }

    for (let i = balls.length-1; i >= 0; i--) {
        let player = balls[i];
        player.accelerate(createVector(0, 1));
        player.constrain();
        player.update();
        levels[level].collide(player);
        player.display();

        if (player.y > height) {
            balls.splice(i, 1);
        }
    }

    translate(0, height);
    scale(1, -1);
        
    
    strokeWeight(5);
    levels[level].lines = [];
    levels[level].funcs = [];
    for(var i = 0; i < points.length - 1; i++) {
        var multiplier = (maxPoints-(points.length-i))/maxPoints;
        
        // stroke(255 * multiplier, 255 * multiplier, 255 * multiplier);
        stroke(lerpColor(color(0, 255*multiplier, 0), color(255 * multiplier, 255 * multiplier, 0), i/points.length));
        noFill();
        line(points[i][0], points[i][1], points[i+1][0], points[i+1][1]);

        levels[level].line(points[i][0], height-points[i][1], points[i+1][0], height-points[i+1][1]);

    }
    
    strokeWeight(2);
    
    if(frameCount % speed === 0) {
        time += dt;
    }
    
    for(var i = 0; i < N; i++) {
        var x_shift = 0;
        var y_shift = 0;
        
        for(var j = 1; j <= i; j++) {
            var angle = frequencies[i-j] * time + angles[i-j];
            x_shift += amplitudes[i-j]*cos(-angle);
            y_shift += amplitudes[i-j]*sin(-angle);
        }
        
        strokeWeight(1);
        
        var angle = frequencies[i] * time + angles[i];

        stroke(255);
        arrow(origin.x + x_shift, origin.y + y_shift, angle, amplitudes[i]);
        noFill();
        stroke(255, 255, 255, 50);
        if (i < 300) {
        // ellipse(origin.x + x_shift, origin.y + y_shift, 2*amplitudes[i], 2*amplitudes[i]);
        }
        if(i === N - 1) {
            x_shift += amplitudes[i]*cos(-angle);
            y_shift += amplitudes[i]*sin(-angle);
            
            points.push([origin.x + x_shift, origin.y + y_shift]);
        }
    }
    
    
    
    pop();
    }
    if (balls.length > 50) {
        balls.shift();
    }
    if (frameCount % 2 === 0) {
        balls.push(new Player(random(-width, width), 0, 30, []));
    }
    // push();
        // camera.moveTo(player.pos);
        // camera.update();
        // camera.apply();
        
        // scenes[level]();

        // for (let i = 0; i < balls.length; i++) {
    // pop();.
}

mouseClicked = function() {
    if(pointsInit.length > 0) {
        mouseDragged();
    }
};

mouseDragged = function() {
    if(item === "custom") {
        pointsInit.push([mouseX, mouseY]);
        background(0);
        for(var i = 0; i < pointsInit.length - 1; i++) {
            line(pointsInit[i][0], pointsInit[i][1], pointsInit[i+1][0], pointsInit[i+1][1]);
        } 
    }
};

var json = (function(w) { return this[w]; })("JSON");
keyPressed = function() {
    if((keyCode === 82 && item === "custom") || keyCode === 83) {
        if(pointsInit.length > quality) {
            var actualPoints = new Array(quality);
            for(var i = 0; i < quality; i++) {
                actualPoints[i] = pointsInit[floor(i * pointsInit.length / (quality))];
            }
            data = actualPoints;
        } else {
            data = pointsInit;
        }
        
        if(keyCode === 82) {
            item = "start";
            init();
        } else {
            println("var data = " + json.stringify(data) + ";");
        }
    }
    
};
